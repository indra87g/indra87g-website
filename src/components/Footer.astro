---
import { execSync } from 'node:child_process'

const today = new Date()
let commitMessage = 'No commit info'
let commitSha = 'unknown'

try {
    commitMessage = execSync('git log -1 --pretty=%B').toString().trim()
    commitSha = execSync('git rev-parse --short HEAD').toString().trim()
} catch (e) {
    console.error('Error getting git info:', e)
}
---

<footer
  class="flex w-full flex-col items-center justify-between gap-12 rounded-base border-2 border-border bg-white p-8 text-text dark:border-darkBorder dark:bg-secondaryBlack dark:text-darkText md:flex-row md:items-start md:p-12"
>
  <!-- Brand / Logo -->
  <div class="flex flex-col items-center text-center md:items-start md:text-left">
    <h1 class="text-2xl font-bold text-main">INDRA87G</h1>
    <p class="mt-2 text-sm">Â© {today.getFullYear()}</p>
    <p class="mt-1 text-xs">
      v1.0.0, deployed at {today.toISOString().split('T')[0]}
    </p>
    <p class="mt-1 text-xs">
      Latest commit: <a
        href=`https://github.com/indra87g/indra87g.vercel.app/commit/${commitSha}`
        class="hover:underline text-main"
        >{commitMessage}</a
      >
    </p>
  </div>

  <!-- Navigation Links -->
  <div class="grid grid-cols-2 gap-x-8 gap-y-4 text-center md:grid-cols-3 md:gap-x-16 md:text-left">
    <div>
      <h3 class="font-semibold text-main">General</h3>
      <ul class="mt-2 space-y-2">
        <li><a href="/blog" class="hover:underline">Blog</a></li>
        <li><a href="/explore" class="hover:underline">Explore</a></li>
        <li><a href="/projects" class="hover:underline">Projects</a></li>
      </ul>
    </div>
    <div>
      <h3 class="font-semibold text-main">Navigations</h3>
      <ul class="mt-2 space-y-2">
        <li><a href="#" class="hover:underline">Talks</a></li>
        <li><a href="#" class="hover:underline">Credits</a></li>
        <li><a href="#" class="hover:underline">Support</a></li>
        <li><a href="#" class="hover:underline">Resume</a></li>
      </ul>
    </div>
    <div>
      <h3 class="font-semibold text-main">Ext. Resources</h3>
      <ul class="mt-2 space-y-2">
        <li><a href="#" class="hover:underline">Bookmarks</a></li>
        <li><a href="#" class="hover:underline">Analytics</a></li>
        <li><a href="#" class="hover:underline">RSS</a></li>
      </ul>
    </div>
  </div>
</footer>
